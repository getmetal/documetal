---
title: "Node"
description: "Overview of the TypeScript Metal SDK."
---

<Card title="Node SDK" icon="github" href="https://github.com/getmetal/metal-ts">
  Visit the GitHub Repo
</Card>


<Note>
  You'll need to [Create an API Key](/misc-get-keys) to [Authentication](/api-reference/introduction#authentication) with Metal.
</Note>

## Installation

```bash
npm i @getmetal/metal-sdk
```

# Retrieval (Semantic Search)

## App Setup

| Param      | Type   | Description                                             |
| ---------- | ------ | ------------------------------------------------------- |
| `api_key`   | string | The API Key for your Org. [Learn more.](/misc-get-keys)  |
| `client_id` | string | The Client ID for your Org. [Learn more.](/misc-get-keys) |
| `index_id`  | string | The ID of the index you want to connect with. [Learn more.](/misc-create-index)             |

```typescript
import { Metal } from "@getmetal/metal-sdk";

const metal = new Metal("apiKey", "clientId", "indexId");
```

## Indexing

#### Payload Object:

| Param       | Type     | Description                                                            |
| ----------- | -------- | ---------------------------------------------------------------------- |
| `id`        | string   | Optional identifier for your embedding.                                |
| `embedding` | number[] | Raw embeddings to be indexed.                                          |
| `imageUrl`  | string   | A URL for an image to be vectorized and indexed.                       |
| `text`      | string   | The text to be vectorized and indexed.                                 |
| `metadata`  | object   | A flexible metdata object to be stored w/ the embedding.               |
| `indexId`   | string   | Optional index id. If none provided the initialized index will be used |

```typescript
await metal.index({ text: "text-to-index" });
```

## Multi(Bulk) Indexing

#### Payload Object:

| Param       | Type     | Description                                                            |
| ----------- | -------- | ---------------------------------------------------------------------- |
| `id`        | string   | Optional identifier for your embedding.                                |
| `index`     | string   | Required index id.                                                     |
| `embedding` | number[] | Raw embeddings to be indexed.                                          |
| `imageUrl`  | string   | A URL for an image to be vectorized and indexed.                       |
| `text`      | string   | The text to be vectorized and indexed.                                 |
| `metadata`  | object   | A flexible metdata object to be stored w/ the embedding.               |
| `indexId`   | string   | Optional index id. If none provided the initialized index will be used |

```typescript
await metal.indexMany([
  { text: "Megadeth", index: "index-id" },
  { text: "Metallica", index: "index-id" },
]);
```

## Searching

#### Payload Object:

| Param       | Type     | Description                                       |
| ----------- | -------- | ------------------------------------------------- |
| `embedding` | number[] | Raw embeddings to be searched.                    |
| `imageUrl`  | string   | A URL for an image to be vectorized and searched. |
| `text`      | string   | The text to be vectorized and searched.           |
| `filters`   | Filter[] | Filters included for filtered search.             |
| `indexId`   | string   | Optional index id where record will get indexed.  |
| `idsOnly`   | boolean  | Return only the ids of the documents.             |
| `limit`     | number   | Number of documents returned by the API           |

#### Filter Object:

| Param   | Type             | Description                 |
| ------- | ---------------- | --------------------------- |
| `field` | string           | Name of the field to filter |
| `value` | string \| number | Value to match the filter   |

```typescript
const results = await metal.search({
  text: "term-to-search",
  filters: [{ field: "favoriteNumber", value: 666 }],
  indexId: "indexId",
  idsOnly: false,
  limit: 100,
});
```

## Uploading File

Only `.csv`, `.docx` and `.pdf` are accepted.

#### Payload Object:

| Param       | Type     | Description                                       |
| ----------- | -------- | ------------------------------------------------- |
| `indexId`   | string   | Optional index id where record will get indexed.  |
| `file`      | string \| File   | File path (NodeJs) or File Object (Browser).             |


```typescript
const results = await metal.uploadFile({
  indexId: "indexId",
  file: './path/to/file.csv',
});
```

## Tuning

| Param     | Type             | Description                                                     |
| --------- | ---------------- | --------------------------------------------------------------- |
| `idA`     | string           | The ID of the first embedding..                                 |
| `idB`     | string           | The ID of the second embedding.                                 |
| `label`   | number[-1, 0, 1] | The "closeness score" of the two items. Either `-1`, `0` or `1` |
| `indexId` | string           | Optional index id where tuning pair will get recorded.          |

```typescript
await metal.tune({ idA, idB, label, indexId: "indexId" });
```

# Memory (Motorhead)

## App Setup

| Param      | Type   | Description                                                         |
| ---------- | ------ | ------------------------------------------------------------------- |
| `apiKey`   | string | For Managed. The API Key for your Org. [details](- [Create an API Key](/misc-get-keys) for [Authentication](/api-reference/introduction#authentication).  |
| `clientId` | string | For Managed.The Client ID for your Org. [details](- [Create an API Key](/misc-get-keys) for [Authentication](/api-reference/introduction#authentication). |
| `baseUrl`  | string | For Self-hosted. The URL path to your motorhead instance            |

```typescript
import { Motorhead } from "@getmetal/metal-sdk";

// Managed
const motorhead = new Motorhead({ apiKey: "apiKey", clientId: "clientId" });

// Self-hosted
const motorhead = new Motorhead({
  baseUrl: "https://motorhead.yourdomain.com",
});
```

````

## Get Memory

#### Payload Object:

| Param       | Type   | Description                                  |
| ----------- | ------ | -------------------------------------------- |
| `sessionId` | string | The ID of the session to retrieve memory for |

```typescript
await motorhead.getMemory("session-id");
````

## Create Memory

### Parameters

```typescript
interface Memory {
  messages: {
    content: string;
    role: "AI" | "Human";
  };
  context: string;
}
```

| Param       | Type     | Description                                                              |
| ----------- | -------- | ------------------------------------------------------------------------ |
| `sessionId` | string   | The ID of the session. If the session does not exist, it will create one |
| `memory`    | Memory[] | A memory payload to update the session memory                            |

```typescript
const memoryPayload = {
  messages: [
    { role: "Human", content: "Who is the best vocalist of all time?" },
    { role: "AI", content: "Ozzy!" },
  ],
  context:
    "User ask what can he eat in Colombia. The AI responds arepas are really nice",
};

await motorhead.addMemory("session-id", memoryPayload);
```

## Delete Memory

#### Payload Object:

| Param       | Type   | Description                                |
| ----------- | ------ | ------------------------------------------ |
| `sessionId` | string | The ID of the session to delete memory for |

```typescript
await motorhead.deleteMemory("session-id");
```
